Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _jsxFileName='src/Table.js';var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require('react-native');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var scrollWidth=1500;var _Dimensions$get=_reactNative.Dimensions.get('window'),width=_Dimensions$get.width,height=_Dimensions$get.height;var AniFlat=_reactNative.Animated.createAnimatedComponent(_reactNative.FlatList);var trheadWidth=110,thHeight=40,trHeight=36,rightWidth=width;var thCommonStyle={lineHeight:thHeight,fontWeight:'bold',color:'#7d7d7d',backgroundColor:'#ebebeb',textAlign:'center'};var tdBorderWidth=1;var tdBorderColor='#ddd';var tdTextColor='#333';var tdBGC='#fff';var textClassStyle={allClass:{color:'#0e6923',backgroundColor:'#f7fff0',fontWeight:'bold'},classA:{color:'#9f824b',backgroundColor:'#fcf2de',fontWeight:'bold'}};var RightRow=function RightRow(props){var _props$item=props.item,item=_props$item===undefined?[0,0,0,0,0,0,0,0,0,0]:_props$item,_props$width=props.width,width=_props$width===undefined?100:_props$width,_props$type=props.type,type=_props$type===undefined?'rightItemText':_props$type;var finalStyle=_reactNative.StyleSheet.flatten([newStyle.rightItemText,textClassStyle[type]]);var viewFinanlStyle=_reactNative.StyleSheet.flatten([newStyle.rightItemView,{width:width}]);return _react2.default.createElement(_reactNative.View,{style:newStyle.rightRow,__source:{fileName:_jsxFileName,lineNumber:63}},item.map(function(d,i){return _react2.default.createElement(_reactNative.View,{style:viewFinanlStyle,key:i,__source:{fileName:_jsxFileName,lineNumber:66}},_react2.default.createElement(_reactNative.Text,{style:finalStyle,__source:{fileName:_jsxFileName,lineNumber:66}},formatNumber(d)));}));};var LeftRow=function LeftRow(props){var item=props.item,_props$width2=props.width,width=_props$width2===undefined?100:_props$width2,_props$type2=props.type,type=_props$type2===undefined?'rightItemText':_props$type2;var viewFinalStyle=_reactNative.StyleSheet.flatten([newStyle.leftItemView,{width:width}]);var finalStyle=_reactNative.StyleSheet.flatten([newStyle.leftItemText,textClassStyle[type]]);return _react2.default.createElement(_reactNative.View,{style:viewFinalStyle,__source:{fileName:_jsxFileName,lineNumber:81}},_react2.default.createElement(_reactNative.Text,{style:finalStyle,__source:{fileName:_jsxFileName,lineNumber:82}},item));};var formatNumber=function formatNumber(str){var res=str.toString().replace(/\d+/,function(n){return n.replace(/\d(?=(\d{3})+$)/g,function($1){return $1+',';});});return res;};var Table=function(_Component){_inherits(Table,_Component);function Table(props){_classCallCheck(this,Table);var _this=_possibleConstructorReturn(this,(Table.__proto__||Object.getPrototypeOf(Table)).call(this,props));_this.rowLength=_this.props.columnNames.length;_this.trheadWidth=_this.props.rowNameWidth||110;_this.rightWidth=_this.rowLength>3?_this.rowLength*100:width-_this.trheadWidth;_this.textWidth=_this.rowLength>3?100:(width-_this.trheadWidth)/_this.rowLength;_this.componentWillReceiveProps=function(nextProps){if(_this.state.data!==nextProps.data){_this.setState({data:nextProps.data});}};_this._renderDataItem=function(_ref){var item=_ref.item,index=_ref.index;if(index===0&&_this.props.rowClassIndex.length!==0){return _react2.default.createElement(RightRow,{width:_this.textWidth,item:item,type:'allClass',__source:{fileName:_jsxFileName,lineNumber:125}});}else if(_this.props.rowClassIndex.includes(index)){return _react2.default.createElement(RightRow,{width:_this.textWidth,item:item,type:'classA',__source:{fileName:_jsxFileName,lineNumber:127}});}else{return _react2.default.createElement(RightRow,{width:_this.textWidth,item:item,__source:{fileName:_jsxFileName,lineNumber:129}});}};_this._keyExtractor=function(item,index){return index.toString();};_this._renderLeftItem=function(_ref2){var item=_ref2.item,index=_ref2.index;if(index===0&&_this.props.rowClassIndex.length!==0){return _react2.default.createElement(LeftRow,{width:_this.trheadWidth,item:item,type:'allClass',__source:{fileName:_jsxFileName,lineNumber:137}});}else if(_this.props.rowClassIndex.includes(index)){return _react2.default.createElement(LeftRow,{width:_this.trheadWidth,item:item,type:'classA',__source:{fileName:_jsxFileName,lineNumber:139}});}else{return _react2.default.createElement(LeftRow,{width:_this.trheadWidth,item:item,__source:{fileName:_jsxFileName,lineNumber:141}});}};_this.state={xValue:new _reactNative.Animated.Value(0),leftY:new _reactNative.Animated.Value(0),rightY:new _reactNative.Animated.Value(0),currentIndex:0,isDescent:false,data:props.data};return _this;}_createClass(Table,[{key:'render',value:function render(){var _this2=this;var scrollX=this.state.xValue.interpolate({inputRange:[0,scrollWidth],outputRange:[0,scrollWidth]});var leftY=this.state.leftY.interpolate({inputRange:[0,1000],outputRange:[0,-1000],extrapolate:'clamp'});var rightY=this.state.rightY.interpolate({inputRange:[0,1000],outputRange:[0,-1000],extrapolate:'clamp'});var renderStyle=_reactNative.StyleSheet.create({tableRight:{width:this.rightWidth},rightHead:{width:this.rightWidth,height:thHeight,flexDirection:'row',zIndex:10},rightHeadView:{height:thHeight,borderRightWidth:tdBorderWidth,borderRightColor:tdBorderColor,borderTopWidth:tdBorderWidth,borderTopColor:tdBorderColor},leftHead:{width:this.trheadWidth,height:thHeight,zIndex:100,borderRightWidth:tdBorderWidth,borderRightColor:tdBorderColor,borderTopWidth:tdBorderWidth,borderTopColor:tdBorderColor}});LeftTitle=function LeftTitle(){return _react2.default.createElement(_reactNative.View,{style:renderStyle.leftHead,__source:{fileName:_jsxFileName,lineNumber:189}},_react2.default.createElement(_reactNative.Text,{style:_extends({},thCommonStyle),__source:{fileName:_jsxFileName,lineNumber:189}},' ',_this2.props.leftTitleName));};RightTitle=function RightTitle(){return _react2.default.createElement(_reactNative.View,{style:renderStyle.rightHead,__source:{fileName:_jsxFileName,lineNumber:192}},_this2.props.columnNames.map(function(item,index){return _react2.default.createElement(_reactNative.View,{style:[renderStyle.rightHeadView,{width:_this2.textWidth}],key:index,__source:{fileName:_jsxFileName,lineNumber:195}},_react2.default.createElement(_reactNative.Text,{style:_extends({},thCommonStyle),__source:{fileName:_jsxFileName,lineNumber:196}},item));}));};return _react2.default.createElement(_reactNative.View,{style:{flexDirection:'row'},__source:{fileName:_jsxFileName,lineNumber:203}},_react2.default.createElement(_reactNative.View,{style:renderStyle.tableLeft,__source:{fileName:_jsxFileName,lineNumber:204}},LeftTitle(),_react2.default.createElement(_reactNative.View,{style:{flex:1},__source:{fileName:_jsxFileName,lineNumber:206}},_react2.default.createElement(_reactNative.Animated.ScrollView,{contentContainerStyle:{minHeight:400},showsVerticalScrollIndicator:false,scrollEventThrottle:1,bounces:false,scrollEnabled:false,__source:{fileName:_jsxFileName,lineNumber:207}},_react2.default.createElement(AniFlat,{style:{transform:[{translateY:leftY}]},showsVerticalScrollIndicator:false,bounces:false,data:this.props.rowNames,keyExtractor:this._keyExtractor,renderItem:this._renderLeftItem,__source:{fileName:_jsxFileName,lineNumber:214}})))),_react2.default.createElement(_reactNative.Animated.ScrollView,{horizontal:true,showsHorizontalScrollIndicator:false,showsVerticalScrollIndicator:false,onScroll:_reactNative.Animated.event([{nativeEvent:{contentOffset:{x:this.state.xValue}}}],{useNativeDriver:true}),scrollEventThrottle:16,bounces:false,__source:{fileName:_jsxFileName,lineNumber:225}},_react2.default.createElement(_reactNative.View,{style:renderStyle.tableRight,__source:{fileName:_jsxFileName,lineNumber:236}},RightTitle(),_react2.default.createElement(_reactNative.Animated.ScrollView,{contentContainerStyle:{minHeight:400},showsVerticalScrollIndicator:false,onScroll:_reactNative.Animated.event([{nativeEvent:{contentOffset:{y:this.state.leftY}}}],{useNativeDriver:true}),scrollEventThrottle:16,bounces:false,scrollEnabled:this.state.scrollEnable,__source:{fileName:_jsxFileName,lineNumber:239}},_react2.default.createElement(AniFlat,{bounces:false,data:this.state.data,keyExtractor:this._keyExtractor,renderItem:this._renderDataItem,__source:{fileName:_jsxFileName,lineNumber:250}})))));}}]);return Table;}(_react.Component);var newStyle=_reactNative.StyleSheet.create({titleText:_extends({},thCommonStyle),rightRow:{flex:1,flexDirection:'row'},tableLeft:{width:trheadWidth},leftItemView:{width:trheadWidth,height:trHeight,borderRightWidth:tdBorderWidth,borderRightColor:tdBorderColor,borderBottomWidth:tdBorderWidth,borderBottomColor:tdBorderColor},leftItemText:{fontSize:16,paddingLeft:10,lineHeight:trHeight,backgroundColor:tdBGC},rightItemView:{height:trHeight,borderBottomWidth:tdBorderWidth,borderBottomColor:tdBorderColor,borderRightWidth:tdBorderWidth,borderRightColor:tdBorderColor},rightItemText:{fontSize:14,paddingRight:10,lineHeight:trHeight,backgroundColor:tdBGC,textAlign:'right'}});exports.default=Table;
//# sourceMappingURL=Table.js.map